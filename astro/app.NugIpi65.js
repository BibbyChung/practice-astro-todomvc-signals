import{a as Q,i as L,D as q,t as W,I as N,e as H,u as O,ɵ as S,v as V,b as J,c as P,d as w,f as A,g as n,h as l,j as c,k as d,l as F,C as I,m as C,n as g,o as j,p as u,q as a,r as M,s as m,w as h,x as T,N as U,A as z,y as x,z as K,B as X,E as Y,F as Z,G as ee}from"./common.Be-DImzI.js";import{R as te,s as b,t as y,a as oe,g as G,b as ne,c as se,r as ie,f as ce,d as le,u as re}from"./todolist.service.CVNNEx_i.js";import{O as ae,m as _}from"./map.BOKCRUkl.js";import{g as f}from"./util.DiFbyzn0.js";import"./innerFrom.-_aNtNEc.js";/**
 * @license Angular v17.3.12
 * (c) 2010-2024 Google LLC. https://angular.io/
 * License: MIT
 */function p(o){o||(Q(),o=L(q));const e=new ae(t=>o.onDestroy(t.next.bind(t)));return t=>t.pipe(W(e))}function D(o,e){!e?.injector&&Q();const t=e?.injector??L(N),s=new te(1),i=H(()=>{let r;try{r=o()}catch(R){O(()=>s.error(R));return}O(()=>s.next(r))},{injector:t,manualCleanup:!0});return t.get(q).onDestroy(()=>{i.destroy(),s.complete()}),s.asObservable()}const pe=["inputRef"];class ${constructor(){this.inputRefS=V.required("inputRef"),this.inputElem$=D(this.inputRefS).pipe(_(e=>e.nativeElement)),this.submitBtn$=f(),this.submitSub=this.submitBtn$.pipe(p(),b(()=>this.inputElem$),y(e=>{const t=e.value;t!==""&&(oe(t??""),e.value="")})).subscribe(),this.focusSub=this.inputElem$.pipe(p(),y(e=>e.focus())).subscribe()}}$.ɵfac=function(e){return new(e||$)};$.ɵcmp=S({type:$,selectors:[["bb-add-item"]],viewQuery:function(e,t){e&1&&J(t.inputRefS,pe,5),e&2&&P()},standalone:!0,features:[w],decls:6,vars:0,consts:[["inputRef",""],[1,"header"],[3,"submit"],["placeholder","What needs to be done?",1,"new-todo"]],template:function(e,t){if(e&1){const s=A();n(0,"header",1)(1,"h1"),l(2,"todos"),c(),n(3,"form",2),d("submit",function(r){return C(s),t.submitBtn$.next(!0),g(r.preventDefault())}),F(4,"input",3,0),c()()}},dependencies:[I],changeDetection:0});const E=o=>({selected:o});function de(o,e){o&1&&l(0," 1 uncompleted item left ")}function ue(o,e){if(o&1&&(l(0),u(1,"async")),o&2){const t=x();K(" ",m(1,1,t.uncompletedCount$)," uncompleted items left ")}}function me(o,e){if(o&1){const t=A();n(0,"button",5),d("click",function(){C(t);const i=x();return g(i.removeAllTodosBtn$.next(!0))}),l(1," Clear completed "),c()}}class k{constructor(){this.removeAllTodosBtn$=f(),this.setTodosFilterBtn$=f(),this.todos$=G(),this.todoFilter$=ne(),this.isShowClearCompleted$=this.todos$.pipe(_(e=>e.filter(s=>s.completed).length!==0)),this.uncompletedCount$=this.todos$.pipe(_(e=>e.filter(t=>!t.completed).length)),this.setTodosFilterSub=this.setTodosFilterBtn$.pipe(p(),y(e=>se(e))).subscribe(),this.removeAllTodosSub=this.removeAllTodosBtn$.pipe(p(),b(()=>ie())).subscribe()}}k.ɵfac=function(e){return new(e||k)};k.ɵcmp=S({type:k,selectors:[["bb-footer"]],standalone:!0,features:[w],decls:21,vars:21,consts:[[1,"footer"],[1,"todo-count"],[1,"filters"],["href","#/",3,"click","ngClass"],[1,"clear-completed"],[1,"clear-completed",3,"click"]],template:function(e,t){e&1&&(n(0,"footer",0)(1,"span",1),j(2,de,1,0),u(3,"async"),j(4,ue,2,3),c(),n(5,"ul",2)(6,"li")(7,"a",3),u(8,"async"),d("click",function(i){return t.setTodosFilterBtn$.next("all"),i.preventDefault()}),l(9," All "),c()(),n(10,"li")(11,"a",3),u(12,"async"),d("click",function(i){return t.setTodosFilterBtn$.next("active"),i.preventDefault()}),l(13," Active "),c()(),n(14,"li")(15,"a",3),u(16,"async"),d("click",function(i){return t.setTodosFilterBtn$.next("completed"),i.preventDefault()}),l(17," Completed "),c()()(),n(18,"div"),j(19,me,2,0,"button",4),u(20,"async"),c()()),e&2&&(a(2),M(2,m(3,5,t.uncompletedCount$)===1?2:4),a(5),h("ngClass",T(15,E,m(8,7,t.todoFilter$)==="all")),a(4),h("ngClass",T(17,E,m(12,9,t.todoFilter$)==="active")),a(4),h("ngClass",T(19,E,m(16,11,t.todoFilter$)==="completed")),a(4),M(19,m(20,13,t.isShowClearCompleted$)?19:-1))},dependencies:[I,U,z],changeDetection:0});const _e=["checkBoxElemRef"],fe=o=>({completed:o});function he(o,e){if(o&1){const t=A();n(0,"li",7)(1,"div",8)(2,"input",9,1),d("change",function(i){const r=C(t).$implicit,R=x();return g(R.updateItemBtn$.next({$event:i,todo:r}))}),c(),n(4,"label"),l(5),c(),n(6,"button",10),d("click",function(){const i=C(t).$implicit,r=x();return g(r.destroyBtn$.next(i.id))}),c()()()}if(o&2){const t=e.$implicit;h("ngClass",T(3,fe,t.completed)),a(2),h("checked",t.completed),a(3),ee(t.title)}}class v{constructor(){this.injector=L(N),this.todos$=G(),this.checkBoxElemRef=V.required("checkBoxElemRef"),this.checkSelectAllBtn$=f(),this.destroyBtn$=f(),this.updateItemBtn$=f(),this.checkSelectAllSub=this.checkSelectAllBtn$.pipe(p(),b(()=>D(this.checkBoxElemRef,{injector:this.injector})),b(e=>ce(e.nativeElement.checked))).subscribe(),this.destroySub=this.destroyBtn$.pipe(p(),y(e=>le(e))).subscribe(),this.toggleCheckboxSub=this.todos$.pipe(p(),_(e=>{const t=e.length,s=e.filter(i=>i.completed).length;return t===0?!1:t===s}),b(e=>D(this.checkBoxElemRef,{injector:this.injector}).pipe(_(t=>({isSelected:e,elemRef:t})))),_(e=>{const t=e.elemRef.nativeElement;t.checked=e.isSelected})).subscribe(),this.updateItemSub=this.updateItemBtn$.pipe(p(),_(e=>({isChecked:e.$event.target.checked,todo:e.todo})),y(e=>{const t=JSON.parse(JSON.stringify(e.todo));t.completed=e.isChecked,re(t)})).subscribe()}}v.ɵfac=function(e){return new(e||v)};v.ɵcmp=S({type:v,selectors:[["bb-list"]],viewQuery:function(e,t){e&1&&J(t.checkBoxElemRef,_e,5),e&2&&P()},standalone:!0,features:[w],decls:12,vars:2,consts:[["checkBoxElemRef",""],["inputElem",""],[1,"todoapp"],[1,"main"],["id","toggle-all","type","checkbox",1,"toggle-all",3,"change"],["for","toggle-all"],[1,"todo-list"],[3,"ngClass"],[1,"view"],["type","checkbox",1,"toggle",3,"change","checked"],[1,"destroy",3,"click"]],template:function(e,t){if(e&1){const s=A();n(0,"section",2),F(1,"bb-add-item"),n(2,"section",3)(3,"input",4,0),d("change",function(){return C(s),g(t.checkSelectAllBtn$.next(!0))}),c(),n(5,"label",5),l(6,"Mark all as complete"),c(),n(7,"ul",6),X(8,he,7,5,"li",7,Z),u(10,"async"),c()(),F(11,"bb-footer"),c()}e&2&&(a(8),Y(m(10,0,t.todos$)))},dependencies:[I,U,z,$,k],changeDetection:0});class B{}B.ɵfac=function(e){return new(e||B)};B.ɵcmp=S({type:B,selectors:[["bb-todos"]],standalone:!0,features:[w],decls:12,vars:0,consts:[[1,"flex","justify-center"],[1,"min-w-2xl","max-w-xl"],[1,"info"],["href","http://twitter.com/bibbynet"],["href","http://todomvc.com"]],template:function(e,t){e&1&&(n(0,"div",0)(1,"div",1),F(2,"bb-list"),n(3,"footer",2)(4,"p"),l(5,"Created by "),n(6,"a",3),l(7,"Bibby"),c()(),n(8,"p"),l(9,"Reference to "),n(10,"a",4),l(11,"TodoMVC"),c()()()()())},dependencies:[I,v],styles:[`[_nghost-%COMP%] {
      display: contents;
    }`],changeDetection:0});export{B as TodosComponent};
