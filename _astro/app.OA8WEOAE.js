import{a as E,i as I,D as M,t as P,I as L,e as U,u as R,ɵ as x,b as O,c as Q,d as B,f as S,g as s,h as r,j as c,k as d,l as k,C as w,v as q,m as g,n as v,o as A,p as u,q as p,r as j,s as m,w as b,x as $,N,A as V,y as T,z,B as G,E as W,F as H,G as K}from"./common.D5bSm3qn.js";import{R as X,s as C,t as y,a as Y,g as J,b as Z,c as ee,r as te,f as oe,d as ne,u as se}from"./todolist.service.CVNNEx_i.js";import{O as ie,m as _}from"./map.BOKCRUkl.js";import{g as f}from"./util.DiFbyzn0.js";import"./innerFrom.-_aNtNEc.js";function a(t){t||(E(a),t=I(M));const n=new ie(e=>t.onDestroy(e.next.bind(e)));return e=>e.pipe(P(n))}function F(t,n){!n?.injector&&E(F);const e=n?.injector??I(L),o=new X(1),i=U(()=>{let l;try{l=t()}catch(h){R(()=>o.error(h));return}R(()=>o.next(l))},{injector:e,manualCleanup:!0});return e.get(M).onDestroy(()=>{i.destroy(),o.complete()}),o.asObservable()}const ce=["inputRef"];let le=(()=>{class t{constructor(){this.inputRefS=q.required("inputRef"),this.inputElem$=F(this.inputRefS).pipe(_(e=>e.nativeElement)),this.submitBtn$=f(),this.submitSub=this.submitBtn$.pipe(a(),C(()=>this.inputElem$),y(e=>{const o=e.value;o!==""&&(Y(o??""),e.value="")})).subscribe(),this.focusSub=this.inputElem$.pipe(a(),y(e=>e.focus())).subscribe()}}return t.ɵfac=function(e){return new(e||t)},t.ɵcmp=x({type:t,selectors:[["bb-add-item"]],viewQuery:function(e,o){e&1&&O(o.inputRefS,ce,5),e&2&&Q()},standalone:!0,features:[B],decls:6,vars:0,consts:[["inputRef",""],[1,"header"],[3,"submit"],["placeholder","What needs to be done?",1,"new-todo"]],template:function(e,o){if(e&1){const i=S();s(0,"header",1)(1,"h1"),r(2,"todos"),c(),s(3,"form",2),d("submit",function(h){return g(i),o.submitBtn$.next(!0),v(h.preventDefault())}),k(4,"input",3,0),c()()}},dependencies:[w],changeDetection:0}),t})();const D=t=>({selected:t});function re(t,n){t&1&&r(0," 1 uncompleted item left ")}function ae(t,n){if(t&1&&(r(0),u(1,"async")),t&2){const e=T();z(" ",m(1,1,e.uncompletedCount$)," uncompleted items left ")}}function pe(t,n){if(t&1){const e=S();s(0,"button",5),d("click",function(){g(e);const i=T();return v(i.removeAllTodosBtn$.next(!0))}),r(1," Clear completed "),c()}}let de=(()=>{class t{constructor(){this.removeAllTodosBtn$=f(),this.setTodosFilterBtn$=f(),this.todos$=J(),this.todoFilter$=Z(),this.isShowClearCompleted$=this.todos$.pipe(_(e=>e.filter(i=>i.completed).length!==0)),this.uncompletedCount$=this.todos$.pipe(_(e=>e.filter(o=>!o.completed).length)),this.setTodosFilterSub=this.setTodosFilterBtn$.pipe(a(),y(e=>ee(e))).subscribe(),this.removeAllTodosSub=this.removeAllTodosBtn$.pipe(a(),C(()=>te())).subscribe()}}return t.ɵfac=function(e){return new(e||t)},t.ɵcmp=x({type:t,selectors:[["bb-footer"]],standalone:!0,features:[B],decls:21,vars:21,consts:[[1,"footer"],[1,"todo-count"],[1,"filters"],["href","#/",3,"click","ngClass"],[1,"clear-completed"],[1,"clear-completed",3,"click"]],template:function(e,o){e&1&&(s(0,"footer",0)(1,"span",1),A(2,re,1,0),u(3,"async"),A(4,ae,2,3),c(),s(5,"ul",2)(6,"li")(7,"a",3),u(8,"async"),d("click",function(l){return o.setTodosFilterBtn$.next("all"),l.preventDefault()}),r(9," All "),c()(),s(10,"li")(11,"a",3),u(12,"async"),d("click",function(l){return o.setTodosFilterBtn$.next("active"),l.preventDefault()}),r(13," Active "),c()(),s(14,"li")(15,"a",3),u(16,"async"),d("click",function(l){return o.setTodosFilterBtn$.next("completed"),l.preventDefault()}),r(17," Completed "),c()()(),s(18,"div"),A(19,pe,2,0,"button",4),u(20,"async"),c()()),e&2&&(p(2),j(2,m(3,5,o.uncompletedCount$)===1?2:4),p(5),b("ngClass",$(15,D,m(8,7,o.todoFilter$)==="all")),p(4),b("ngClass",$(17,D,m(12,9,o.todoFilter$)==="active")),p(4),b("ngClass",$(19,D,m(16,11,o.todoFilter$)==="completed")),p(4),j(19,m(20,13,o.isShowClearCompleted$)?19:-1))},dependencies:[w,N,V],changeDetection:0}),t})();const ue=["checkBoxElemRef"],me=t=>({completed:t});function _e(t,n){if(t&1){const e=S();s(0,"li",7)(1,"div",8)(2,"input",9,1),d("change",function(i){const l=g(e).$implicit,h=T();return v(h.updateItemBtn$.next({$event:i,todo:l}))}),c(),s(4,"label"),r(5),c(),s(6,"button",10),d("click",function(){const i=g(e).$implicit,l=T();return v(l.destroyBtn$.next(i.id))}),c()()()}if(t&2){const e=n.$implicit;b("ngClass",$(3,me,e.completed)),p(2),b("checked",e.completed),p(3),K(e.title)}}let fe=(()=>{class t{constructor(){this.injector=I(L),this.todos$=J(),this.checkBoxElemRef=q.required("checkBoxElemRef"),this.checkSelectAllBtn$=f(),this.destroyBtn$=f(),this.updateItemBtn$=f(),this.checkSelectAllSub=this.checkSelectAllBtn$.pipe(a(),C(()=>F(this.checkBoxElemRef,{injector:this.injector})),C(e=>oe(e.nativeElement.checked))).subscribe(),this.destroySub=this.destroyBtn$.pipe(a(),y(e=>ne(e))).subscribe(),this.toggleCheckboxSub=this.todos$.pipe(a(),_(e=>{const o=e.length,i=e.filter(l=>l.completed).length;return o===0?!1:o===i}),C(e=>F(this.checkBoxElemRef,{injector:this.injector}).pipe(_(o=>({isSelected:e,elemRef:o})))),_(e=>{const o=e.elemRef.nativeElement;o.checked=e.isSelected})).subscribe(),this.updateItemSub=this.updateItemBtn$.pipe(a(),_(e=>({isChecked:e.$event.target.checked,todo:e.todo})),y(e=>{const o=JSON.parse(JSON.stringify(e.todo));o.completed=e.isChecked,se(o)})).subscribe()}}return t.ɵfac=function(e){return new(e||t)},t.ɵcmp=x({type:t,selectors:[["bb-list"]],viewQuery:function(e,o){e&1&&O(o.checkBoxElemRef,ue,5),e&2&&Q()},standalone:!0,features:[B],decls:12,vars:2,consts:[["checkBoxElemRef",""],["inputElem",""],[1,"todoapp"],[1,"main"],["id","toggle-all","type","checkbox",1,"toggle-all",3,"change"],["for","toggle-all"],[1,"todo-list"],[3,"ngClass"],[1,"view"],["type","checkbox",1,"toggle",3,"change","checked"],[1,"destroy",3,"click"]],template:function(e,o){if(e&1){const i=S();s(0,"section",2),k(1,"bb-add-item"),s(2,"section",3)(3,"input",4,0),d("change",function(){return g(i),v(o.checkSelectAllBtn$.next(!0))}),c(),s(5,"label",5),r(6,"Mark all as complete"),c(),s(7,"ul",6),G(8,_e,7,5,"li",7,H),u(10,"async"),c()(),k(11,"bb-footer"),c()}e&2&&(p(8),W(m(10,0,o.todos$)))},dependencies:[w,N,V,le,de],changeDetection:0}),t})(),ye=(()=>{class t{}return t.ɵfac=function(e){return new(e||t)},t.ɵcmp=x({type:t,selectors:[["bb-todos"]],standalone:!0,features:[B],decls:12,vars:0,consts:[[1,"flex","justify-center"],[1,"min-w-2xl","max-w-xl"],[1,"info"],["href","http://twitter.com/bibbynet"],["href","http://todomvc.com"]],template:function(e,o){e&1&&(s(0,"div",0)(1,"div",1),k(2,"bb-list"),s(3,"footer",2)(4,"p"),r(5,"Created by "),s(6,"a",3),r(7,"Bibby"),c()(),s(8,"p"),r(9,"Reference to "),s(10,"a",4),r(11,"TodoMVC"),c()()()()())},dependencies:[w,fe],styles:[`[_nghost-%COMP%] {
      display: contents;
    }`],changeDetection:0}),t})();export{ye as TodosComponent};
