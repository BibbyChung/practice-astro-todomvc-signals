import{r as a}from"./index.NEDEFKed.js";import{g as Z,m as O,f as ee}from"./util.DortvTSX.js";import{t as S,a as te,g as k,b as ie,s as T,r as ne,c as re,d as oe,u as se,e as ce,f as ue}from"./todolist.service.DpIt9x9U.js";var I={exports:{}},E={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fe=a,le=Symbol.for("react.element"),ae=Symbol.for("react.fragment"),de=Object.prototype.hasOwnProperty,he=fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ve={key:!0,ref:!0,__self:!0,__source:!0};function U(t,e,i){var n,s={},r=null,c=null;i!==void 0&&(r=""+i),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(c=e.ref);for(n in e)de.call(e,n)&&!ve.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:le,type:t,key:r,ref:c,props:s,_owner:he.current}}E.Fragment=ae;E.jsx=U;E.jsxs=U;I.exports=E;var o=I.exports,pe=Symbol.for("preact-signals");function A(){if(m>1)m--;else{for(var t,e=!1;x!==void 0;){var i=x;for(x=void 0,F++;i!==void 0;){var n=i.o;if(i.o=void 0,i.f&=-3,!(8&i.f)&&J(i))try{i.c()}catch(s){e||(t=s,e=!0)}i=n}}if(F=0,m--,e)throw t}}var u=void 0,x=void 0,m=0,F=0,$=0;function M(t){if(u!==void 0){var e=t.n;if(e===void 0||e.t!==u)return e={i:0,S:t,p:u.s,n:void 0,t:u,e:void 0,x:void 0,r:e},u.s!==void 0&&(u.s.n=e),u.s=e,t.n=e,32&u.f&&t.S(e),e;if(e.i===-1)return e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=u.s,e.n=void 0,u.s.n=e,u.s=e),e}}function f(t){this.v=t,this.i=0,this.n=void 0,this.t=void 0}f.prototype.brand=pe;f.prototype.h=function(){return!0};f.prototype.S=function(t){this.t!==t&&t.e===void 0&&(t.x=this.t,this.t!==void 0&&(this.t.e=t),this.t=t)};f.prototype.U=function(t){if(this.t!==void 0){var e=t.e,i=t.x;e!==void 0&&(e.x=i,t.e=void 0),i!==void 0&&(i.e=e,t.x=void 0),t===this.t&&(this.t=i)}};f.prototype.subscribe=function(t){var e=this;return W(function(){var i=e.value,n=u;u=void 0;try{t(i)}finally{u=n}})};f.prototype.valueOf=function(){return this.value};f.prototype.toString=function(){return this.value+""};f.prototype.toJSON=function(){return this.value};f.prototype.peek=function(){var t=u;u=void 0;try{return this.value}finally{u=t}};Object.defineProperty(f.prototype,"value",{get:function(){var t=M(this);return t!==void 0&&(t.i=this.i),this.v},set:function(t){if(t!==this.v){if(F>100)throw new Error("Cycle detected");this.v=t,this.i++,$++,m++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{A()}}}});function me(t){return new f(t)}function J(t){for(var e=t.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function L(t){for(var e=t.s;e!==void 0;e=e.n){var i=e.S.n;if(i!==void 0&&(e.r=i),e.S.n=e,e.i=-1,e.n===void 0){t.s=e;break}}}function V(t){for(var e=t.s,i=void 0;e!==void 0;){var n=e.p;e.i===-1?(e.S.U(e),n!==void 0&&(n.n=e.n),e.n!==void 0&&(e.n.p=n)):i=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=n}t.s=i}function b(t){f.call(this,void 0),this.x=t,this.s=void 0,this.g=$-1,this.f=4}(b.prototype=new f).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===$))return!0;if(this.g=$,this.f|=1,this.i>0&&!J(this))return this.f&=-2,!0;var t=u;try{L(this),u=this;var e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(i){this.v=i,this.f|=16,this.i++}return u=t,V(this),this.f&=-2,!0};b.prototype.S=function(t){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}f.prototype.S.call(this,t)};b.prototype.U=function(t){if(this.t!==void 0&&(f.prototype.U.call(this,t),this.t===void 0)){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}};b.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var t=this.t;t!==void 0;t=t.x)t.t.N()}};Object.defineProperty(b.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var t=M(this);if(this.h(),t!==void 0&&(t.i=this.i),16&this.f)throw this.v;return this.v}});function ye(t){return new b(t)}function q(t){var e=t.u;if(t.u=void 0,typeof e=="function"){m++;var i=u;u=void 0;try{e()}catch(n){throw t.f&=-2,t.f|=8,D(t),n}finally{u=i,A()}}}function D(t){for(var e=t.s;e!==void 0;e=e.n)e.S.U(e);t.x=void 0,t.s=void 0,q(t)}function be(t){if(u!==this)throw new Error("Out-of-order effect");V(this),u=t,this.f&=-2,8&this.f&&D(this),A()}function g(t){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}g.prototype.c=function(){var t=this.S();try{if(8&this.f||this.x===void 0)return;var e=this.x();typeof e=="function"&&(this.u=e)}finally{t()}};g.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,q(this),L(this),m++;var t=u;return u=this,be.bind(this,t)};g.prototype.N=function(){2&this.f||(this.f|=2,this.o=x,x=this)};g.prototype.d=function(){this.f|=8,1&this.f||D(this)};function W(t){var e=new g(t);try{e.c()}catch(i){throw e.d(),i}return e.d.bind(e)}var z={exports:{}},Y={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y=a;function xe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Se=typeof Object.is=="function"?Object.is:xe,ge=y.useState,je=y.useEffect,we=y.useLayoutEffect,ke=y.useDebugValue;function $e(t,e){var i=e(),n=ge({inst:{value:i,getSnapshot:e}}),s=n[0].inst,r=n[1];return we(function(){s.value=i,s.getSnapshot=e,C(s)&&r({inst:s})},[t,i,e]),je(function(){return C(s)&&r({inst:s}),t(function(){C(s)&&r({inst:s})})},[t]),ke(i),i}function C(t){var e=t.getSnapshot;t=t.value;try{var i=e();return!Se(t,i)}catch{return!0}}function Ee(t,e){return e()}var Ne=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ee:$e;Y.useSyncExternalStore=y.useSyncExternalStore!==void 0?y.useSyncExternalStore:Ne;z.exports=Y;var Ce=z.exports,G={};/**
 * @license React
 * react-jsx-dev-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _e=Symbol.for("react.fragment");G.Fragment=_e;G.jsxDEV=void 0;var Re=Symbol.for("react.element"),P=function(){},h,H=Symbol.dispose||Symbol.for("Symbol.dispose");function _(t,e){var i=e.effect.S();return h=e,Oe.bind(e,t,i)}function Oe(t,e){e(),h=t}var B,R;(B={u:0,effect:{s:void 0,c:function(){},S:function(){return P},d:function(){}},subscribe:function(){return P},getSnapshot:function(){return 0},S:function(){},f:function(){}})[H]=function(){};var Te=Promise.prototype.then.bind(Promise.resolve());function Fe(){R||(R=Te(function(){var t;R=void 0,(t=h)==null||t.f()}))}function K(t){t===void 0&&(t=0),Fe();var e=a.useRef();e.current==null&&(e.current=function(n){var s,r,c,l,d=0,N=W(function(){r=this});return r.c=function(){d=d+1|0,l&&l()},(s={u:n,effect:r,subscribe:function(p){return l=p,function(){d=d+1|0,l=void 0,N()}},getSnapshot:function(){return d},S:function(){if(h!=null){var p=h.u,j=this.u;p==0&&j==0||p==0&&j==1?(h.f(),c=_(void 0,this)):p==1&&j==0||p==2&&j==0||(c=_(h,this))}else c=_(void 0,this)},f:function(){c?.(),c=void 0}})[H]=function(){this.f()},s}(t));var i=e.current;return Ce.useSyncExternalStore(i.subscribe,i.getSnapshot,i.getSnapshot),i.S(),i}Object.defineProperties(f.prototype,{$$typeof:{configurable:!0,value:Re},type:{configurable:!0,value:function(t){var e=t.data,i=K(1);try{return e.value}finally{i.f()}}},props:{configurable:!0,get:function(){return{data:this}}},ref:{configurable:!0,value:null}});function Q(t){return K(t)}const Ae=new FinalizationRegistry(t=>{t.current?.()});function X(t,e){const i=a.useRef(null),n=a.useRef(!1);return n.current||(n.current=!0,Ae.register(n,i)),a.useMemo(()=>{i.current?.(),i.current=null;const[r,c]=t();return i.current=typeof c=="function"?c:null,r},e)}function w(t,e){return X(()=>{const i=me({kind:1,value:e?.initialValue}),n=t.subscribe({next:r=>{let c;try{typeof r=="object"&&r!==null?c=Array.isArray(r)?[...r]:{...r}:c=r}catch{c=r}i.value={kind:1,value:c}},error:r=>{if(e?.rejectErrors)throw r;i.value={kind:2,error:r}}}),s=()=>{n.unsubscribe()};return[ye(()=>{const r=i.value;switch(r.kind){case 1:return r.value;case 2:throw r.error}}),s]},[])}const v=()=>X(()=>{const t=Z();return[t,()=>{t.complete()}]},[]);function De(){const t=a.useRef(null),e=v();return a.useEffect(()=>{const i=e.pipe(S(()=>{const n=t.current?.value??"";n!==""&&t.current&&(te(n??""),t.current.value="")})).subscribe();return()=>{i.unsubscribe()}},[]),o.jsxs("header",{className:"header",children:[o.jsx("h1",{children:"todos"}),o.jsx("form",{onSubmit:i=>{e.next(!0),i.preventDefault()},children:o.jsx("input",{className:"new-todo",placeholder:"What needs to be done?",autoFocus:!0,ref:t})})]})}function Pe(){Q();const t=v(),e=v(),i=w(k().pipe(O(r=>r.filter(l=>l.completed).length!==0))),n=w(k().pipe(O(r=>r.filter(c=>!c.completed).length))),s=w(ie());return a.useEffect(()=>{const r=t.pipe(T(()=>ne())).subscribe(),c=e.pipe(S(l=>re(l))).subscribe();return()=>{r.unsubscribe(),c.unsubscribe()}},[]),o.jsxs("footer",{className:"footer",children:[o.jsx("span",{children:n.value===1?"1 uncompleted item left":`${n.value} uncompleted items left`}),o.jsxs("ul",{className:"filters",children:[o.jsx("li",{children:o.jsx("a",{onClick:r=>{e.next("all"),r.preventDefault()},href:"#/",className:s.value==="all"?"selected":"",children:"All"})}),o.jsx("li",{children:o.jsx("a",{onClick:r=>{e.next("active"),r.preventDefault()},href:"#/",className:s.value==="active"?"selected":"",children:"Active"})}),o.jsx("li",{children:o.jsx("a",{onClick:r=>{e.next("completed"),r.preventDefault()},href:"#/",className:s.value==="completed"?"selected":"",children:"Completed"})})]}),o.jsx("div",{children:i.value?o.jsx("button",{onClick:r=>{t.next(!0)},className:"clear-completed",children:"Clear completed"}):""})]})}function Be(t){const e=v(),i=v();return a.useEffect(()=>{const n=e.pipe(S(()=>oe(t.id))).subscribe(),s=i.pipe(S(r=>{const c=JSON.parse(JSON.stringify(t));c.completed=r,se(c)})).subscribe();return()=>{n.unsubscribe(),s.unsubscribe()}},[]),o.jsx("li",{className:t.completed?"completed":"",children:o.jsxs("div",{className:"view",children:[o.jsx("input",{className:"toggle",type:"checkbox",checked:t.completed,onChange:n=>{i.next(n.target.checked)}}),o.jsx("label",{children:t.title}),o.jsx("button",{onClick:n=>{e.next(!0),n.preventDefault()},className:"destroy"})]})})}function Ie(){Q();const t=a.useRef(null),e=v(),i=v(),n=w(k());return a.useEffect(()=>{e.next(!0);const s=e.pipe(ee(c=>c),T(()=>k()),O(c=>{const l=c.length,d=c.filter(N=>N.completed).length;return l===0?!1:l===d}),S(c=>{t.current&&(t.current.checked=c)})).subscribe(),r=i.pipe(ce(1),T(()=>ue(t.current?.checked??!1))).subscribe();return()=>{s.unsubscribe(),r.unsubscribe()}},[]),o.jsxs("section",{className:"todoapp",children:[o.jsx(De,{}),o.jsxs("section",{className:"main",children:[o.jsx("input",{id:"toggle-all",className:"toggle-all",type:"checkbox",onChange:s=>{i.next(!0)},ref:t}),o.jsx("label",{htmlFor:"toggle-all",children:"Mark all as complete"}),o.jsx("ul",{className:"todo-list",children:n.value?.map((s,r)=>o.jsx(Be,{...s},s.id))})]}),o.jsx(Pe,{})]})}function Le(){return o.jsxs("div",{className:"min-w-2xl",children:[o.jsx(Ie,{}),o.jsxs("footer",{className:"info",children:[o.jsxs("p",{children:["Created by ",o.jsx("a",{href:"http://twitter.com/oscargodson",children:"Bibby"})]}),o.jsxs("p",{children:["Reference to ",o.jsx("a",{href:"http://todomvc.com",children:"TodoMVC"})]})]})]})}export{Le as default};
